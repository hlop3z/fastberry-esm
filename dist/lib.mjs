/*! 
* Fastberry @ Copyright 2023
* MIT @ License 
*/
/* eslint-disable */
function g(e){if(e){let r=Object.keys(e);if(r.length===1)return e[r[0]]}return e}function y(e,r=["error","meta","messages"]){let t=!!e.errors,s=e.errors?e.errors:[],n=e.data,o=e.errors?"request":null;return e.errors||Object.keys(n).forEach(i=>{let m=Object.keys(n[i]);JSON.stringify(m)===JSON.stringify(r)&&n[i].error===!0&&(t=!0,o="input")}),t&&o==="input"&&(n=null,s=e.data),{data:g(n),errors:s,error:t,errorType:o}}function p(e){return function(t=null,s={}){return new Promise(n=>{e.$graphqlBase(t,s).then(o=>{n(y(o))}).catch(o=>{n({data:null,errors:[o],error:!0,errorType:"network"})})})}}function $(e){let r=[];return e.forEach(t=>{r.push(t.node)}),r}function d(e){let r={};return!e.error&&e.data&&(e.data.edges?(r.$type="list",r.items=$(e.data.edges),e.data.pageInfo&&(r.pageInfo=e.data.pageInfo)):(r.$type="dict",r.data=e.data)),r}var h=class{constructor(r){this.$script=r.script,this.$api=r.api}$op(r,t=null){return this.$api.$crud(this.$script,{operationName:r,variables:t})}get api(){return this.$api}get crud(){return this.$op}run(r,t=null){return this.$api.$graphqlBase(this.$script,{operationName:r,variables:t})}};function u(e){return(r=null,t={})=>new Promise(s=>{e.$graphql(r,t).then(n=>{let o={...n};n.error||(o.data=d(n)),s(o)})})}function l(e={}){return new h(e)}function a(e,r){return new Promise((t,s)=>{fetch(e,r).then(n=>n.json()).then(n=>t(n)).catch(n=>s(n))})}function b(e,r){let t=e.endsWith("/")?e:e+"/",s=r.startsWith("/")?r.substring(1):r;return t+s}var c=class{constructor(r,t){this.host=r,this.options=t,this.baseURL=s=>b(this.host,s),this.$graphql=p(this),this.$crud=u(this),this.graphql=s=>l({api:this,script:s})}static createAPI(r,t={}){let s={mode:"cors",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}};return new c(r,{...s,...t})}get(r=null,t=!1){let s=t?`?${new URLSearchParams(t).toString()}`:"",n=`${this.baseURL(r)}${s}`,o={method:"GET"},i={...this.options,...o};return a(n,i)}post(r=null,t=!1){let s=`${this.baseURL(r)}`,n=t&&JSON.stringify(t),o={method:"POST"};t&&(o.body=n);let i={...this.options,...o};return a(s,i)}put(r=null,t=!1){let s=`${this.baseURL(r)}`,n=t&&JSON.stringify(t),o={method:"PUT"};t&&(o.body=n);let i={...this.options,...o};return a(s,i)}delete(r=null,t=!1){let s=`${this.baseURL(r)}`,n=t&&JSON.stringify(t),o={method:"DELETE"};t&&(o.body=n);let i={...this.options,...o};return a(s,i)}patch(r=null,t=!1){let s=`${this.baseURL(r)}`,n=t&&JSON.stringify(t),o={method:"PATCH"};t&&(o.body=n);let i={...this.options,...o};return a(s,i)}$graphqlBase(r=null,t={}){let s=t||{},n={query:r},o=s.operationName?s.operationName:null,i=s.variables?s.variables:null;return i&&(n.variables=i),o&&(n.operationName=o),this.post("graphql",n)}},f=c.createAPI;var T=f;export{T as default};
